modules = ["nodejs-20", "postgresql-16"]

[nix]
channel = "unstable"

[build]
target = "build"
command = "npm run client:build"

[env]
PATH = "/opt/nodejs/bin:/home/runner/.cargo/bin:/home/runner/.local/bin:$PATH"
NODE_ENV = "production"

[[ports]]
localPort = 5000
externalPort = 80

[versionControl]
enabled = true

[workflow]
run = "npm start"

[userenv]

[userenv.shared]
PORT = "5000"

